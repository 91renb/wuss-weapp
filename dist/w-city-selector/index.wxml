<view class="w-index">
  <w-index height="100%" bind:change="onChange">

    <!-- 搜索框 -->
    <view 
      class="search-city {{searchFocus ? 'search-city-show' : ''}}" 
      hover-class="none" 
      hover-stop-propagation="false"
    >
      <view class="search-content" hover-class="none" hover-stop-propagation="false">
        <input 
          class="search-input" 
          value="{{searchVal}}"
          placeholder-class="search-placeholder" 
          placeholder="请输入要搜索的城市..." 
          bindinput="handleSearchCity"
          bindfocus="handleSearchFocus"
          bindblur="handleSearchBlur"
          focus="{{searchFocus}}"
        />
        <button class="search-btn" wx:if="{{!searchFocus}}">
          搜索
        </button>
        <button 
          class="search-btn cancel-btn" 
          bindtap="handleSearchCancel"
          wx:if="{{searchFocus}}"
        >
          取消 
        </button>
      </view>
    </view>
    <scroll-view 
      class="search-result {{searchFocus ? 'search-result-show' : ''}}" 
      style="height: {{systemInfo.windowHeight - 55}}px;"
      scroll-x="false" 
      scroll-y="true" 
      upper-threshold="50" 
      lower-threshold="50" 
      scroll-top="0" 
      scroll-left="0" 
      scroll-into-view="" 
      scroll-with-animation="false" 
      enable-back-to-top="false" 
      bindscrolltoupper="" 
      bindscrolltolower="" 
      bindscroll=""
    >
      <view 
        class="result-items"
        wx:for="{{searchResult}}" 
        wx:key="index" 
        wx:for-item="city"
        wx:if="{{index <= 30}}"
      >
        {{ city.name }}
      </view>
    </scroll-view>
    <!-- 搜索框 -->

    <!-- 当前位置 -->
    <view class="v-cell" hover-class="none" hover-stop-propagation="false">
      <view class="get-position" hover-class="none" hover-stop-propagation="false">
        <view class="title" >
          <view class="block"></view>
          <text >当前位置</text>
        </view>
        <view class="city-items" hover-class="none" hover-stop-propagation="false">
          <view wx:for="{{[1,2,3,4,5,6,7,8,9,10]}}" wx:key="index" class="items" hover-class="none" hover-stop-propagation="false">
            白云国际机场
          </view>
        </view>
      </view>
    </view>
    <!-- 当前位置 -->


    <!-- 热门城市 -->
    <view class="v-cell" hover-class="none" hover-stop-propagation="false">
      <view class="popular-city" hover-class="none" hover-stop-propagation="false">
        <view class="title" >
          <view class="block"></view>
          <text >热门城市</text>
        </view>
        <view class="city-items" hover-class="none" hover-stop-propagation="false">
          <view wx:for="{{popularCity}}" wx:key="index" wx:for-item="city" class="items" hover-class="none" hover-stop-propagation="false">
            {{city.name}}
          </view>
        </view>
      </view>      
    </view>
    <!-- 热门城市 -->

    <!-- 历史选择 -->
    <view class="v-cell" hover-class="none" hover-stop-propagation="false">
      <view class="history-city" hover-class="none" hover-stop-propagation="false">
        <view class="title" >
          <view class="block"></view>
          <text >历史选择</text>
        </view>
        <view class="city-items" hover-class="none" hover-stop-propagation="false">
          <view wx:for="{{[1,2,3,4,5,6,7,8,9,10]}}" wx:key="index" class="items" hover-class="none" hover-stop-propagation="false">
            广州东站
          </view>
        </view>
      </view>      
    </view>
    <!-- 历史选择 -->

    <!-- 城市索引选择器 -->
    <w-index-item 
      wx:for="{{ cities }}" 
      wx:for-index="index" 
      wx:key="{{index}}" 
      wx:for-item="item" name="{{item.key}}"
    >
      <view 
        class="w-index-item" 
        wx:for="{{item.list}}" 
        wx:for-index="in" 
        wx:key="{{in}}" 
        wx:for-item="it"
      >
        {{it.name}}
      </view>
    </w-index-item>
    <!-- 城市索引选择器 -->

  </w-index>
</view>
